{"ast":null,"code":"var _jsxFileName = \"/home/maksb/\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438/170km/frontend/src/pages/MainPage/MainPage.jsx\",\n  _s = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useLocation, Outlet, Link } from 'react-router-dom';\nimport classes from './MainPage.module.css';\nimport TopMenu from '@component/TopMenu/TopMenu';\nimport logo from '@image/logo.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst MenuItem = ({\n  item,\n  onClick,\n  isSelected\n}) => {\n  return /*#__PURE__*/_jsxDEV(Nav.Item, {\n    children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n      onClick: onClick,\n      active: isSelected,\n      style: {\n        cursor: 'pointer',\n        backgroundColor: isSelected ? '#eee' : 'transparent'\n      },\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 11,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 10,\n    columnNumber: 3\n  }, this);\n};\n_c = MenuItem;\nconst MainPage = () => {\n  _s();\n  const [selectedId, setId] = useState(-1);\n  const location = useLocation();\n  ///\tconst ListServers = location.state?.list || []\n  //const User = location.state?.user || undefined\n  const [ListServers, setListServers] = useState(undefined);\n  const [User, setUser] = useState(undefined);\n  const authenticateUser = userData => {\n    localStorage.setItem('userData', JSON.stringify(userData));\n  };\n  const getUserData = () => {\n    const storedUserData = localStorage.getItem('userData');\n    if (storedUserData !== undefined) return storedUserData ? JSON.parse(storedUserData) : null;\n  };\n  const isUserAuthenticated = () => {\n    return getUserData() !== null;\n  };\n  const navigate = useNavigate();\n  const handleItemClick = selectedItem => {\n    setId(selectedItem.id);\n  };\n  useEffect(() => {\n    const locationState = location.state;\n    const storedUserData = getUserData();\n    if (locationState !== null) {\n      console.log('USED STATE', locationState.user);\n      setListServers(locationState.list || []);\n      setUser(locationState.user || undefined);\n      authenticateUser({\n        User: locationState.user,\n        ListServers: locationState.list\n      });\n    } else if ((storedUserData === null || storedUserData === void 0 ? void 0 : storedUserData.User) !== undefined) {\n      setListServers(storedUserData.ListServers);\n      setUser(storedUserData.User);\n      console.log();\n    } else {\n      navigate('/');\n    }\n  }, []);\n  const ItemMenuCenterItem = [{\n    text: 'Home',\n    to: '/menu',\n    state: {\n      ListServers\n    }\n  }, {\n    text: 'Music',\n    to: '/menu/music',\n    state: {\n      idServer: selectedId,\n      idUser: User === null || User === void 0 ? void 0 : User.id\n    }\n  }, {\n    text: 'Admin',\n    to: '/menu/admin',\n    state: {\n      idServer: selectedId,\n      idUser: User === null || User === void 0 ? void 0 : User.id\n    }\n  }, {\n    text: 'Contact',\n    to: '/menu/contact'\n  }];\n  const LogoItem = /*#__PURE__*/_jsxDEV(Link, {\n    className: \"navbar-brand\",\n    to: \"/\",\n    children: [/*#__PURE__*/_jsxDEV(\"img\", {\n      src: logo,\n      className: classes.logo,\n      alt: \"site logo\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 4\n    }, this), \"Finer\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 3\n  }, this);\n  const ItemMenuLastItem = [{\n    text: 'Logout',\n    to: '/',\n    callback: e => {\n      e.preventDefault();\n      localStorage.removeItem('userData');\n      navigate('/');\n    }\n  }];\n  const PATH_TO_IMG = `https://cdn.discordapp.com/avatars/${User === null || User === void 0 ? void 0 : User.id}/${User === null || User === void 0 ? void 0 : User.avatar}.png`;\n  const LastItemMenu = /*#__PURE__*/_jsxDEV(Link, {\n    className: \"nav-link\",\n    state: User,\n    to: \"/menu/me\",\n    children: /*#__PURE__*/_jsxDEV(\"img\", {\n      src: PATH_TO_IMG,\n      alt: \"user avatar\",\n      className: classes.avatar\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 3\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: [User !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TopMenu, {\n        user: User,\n        currentid: selectedId,\n        listServer: ListServers,\n        NavigationItemCenter: ItemMenuCenterItem,\n        LogoItem: LogoItem,\n        RightItemMenu: ItemMenuLastItem,\n        LastItemMenu: LastItemMenu\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        items: ListServers,\n        onItemClick: handleItemClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 115,\n    columnNumber: 3\n  }, this);\n};\n_s(MainPage, \"MJjZcalPheHGH5w7I13tyzKcCBU=\", false, function () {\n  return [useLocation, useNavigate];\n});\n_c2 = MainPage;\nexport default MainPage;\nvar _c, _c2;\n$RefreshReg$(_c, \"MenuItem\");\n$RefreshReg$(_c2, \"MainPage\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useLocation","Outlet","Link","classes","TopMenu","logo","jsxDEV","_jsxDEV","Fragment","_Fragment","MenuItem","item","onClick","isSelected","Nav","Item","children","active","style","cursor","backgroundColor","name","fileName","_jsxFileName","lineNumber","columnNumber","_c","MainPage","_s","selectedId","setId","location","ListServers","setListServers","undefined","User","setUser","authenticateUser","userData","localStorage","setItem","JSON","stringify","getUserData","storedUserData","getItem","parse","isUserAuthenticated","navigate","handleItemClick","selectedItem","id","locationState","state","console","log","user","list","ItemMenuCenterItem","text","to","idServer","idUser","LogoItem","className","src","alt","ItemMenuLastItem","callback","e","preventDefault","removeItem","PATH_TO_IMG","avatar","LastItemMenu","container","currentid","listServer","NavigationItemCenter","RightItemMenu","Menu","items","onItemClick","_c2","$RefreshReg$"],"sources":["/home/maksb/Загрузки/170km/frontend/src/pages/MainPage/MainPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useNavigate, useLocation, Outlet, Link } from 'react-router-dom'\nimport classes from './MainPage.module.css'\nimport TopMenu from '@component/TopMenu/TopMenu'\nimport logo from '@image/logo.png'\n\n\nconst MenuItem = ({ item, onClick, isSelected }) => {\n\treturn (\n\t\t<Nav.Item>\n\t\t\t<Nav.Link\n\t\t\t\tonClick={onClick}\n\t\t\t\tactive={isSelected}\n\t\t\t\tstyle={{\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\tbackgroundColor: isSelected ? '#eee' : 'transparent',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{item.name}\n\t\t\t</Nav.Link>\n\t\t</Nav.Item>\n\t)\n}\n\nconst MainPage = () => {\n\tconst [selectedId, setId] = useState(-1)\n\tconst location = useLocation()\n\t///\tconst ListServers = location.state?.list || []\n\t//const User = location.state?.user || undefined\n\tconst [ListServers, setListServers] = useState(undefined)\n\tconst [User, setUser] = useState(undefined)\n\tconst authenticateUser = userData => {\n\t\tlocalStorage.setItem('userData', JSON.stringify(userData))\n\t}\n\tconst getUserData = () => {\n\t\tconst storedUserData = localStorage.getItem('userData')\n\t\tif (storedUserData !== undefined)\n\t\t\treturn storedUserData ? JSON.parse(storedUserData) : null\n\t}\n\tconst isUserAuthenticated = () => {\n\t\treturn getUserData() !== null\n\t}\n\n\tconst navigate = useNavigate()\n\n\tconst handleItemClick = selectedItem => {\n\t\tsetId(selectedItem.id)\n\t}\n\tuseEffect(() => {\n\t\tconst locationState = location.state\n\t\tconst storedUserData = getUserData()\n\t\tif (locationState !== null) {\n\t\t\tconsole.log('USED STATE', locationState.user)\n\t\t\tsetListServers(locationState.list || [])\n\t\t\tsetUser(locationState.user || undefined)\n\t\t\tauthenticateUser({\n\t\t\t\tUser: locationState.user,\n\t\t\t\tListServers: locationState.list,\n\t\t\t})\n\t\t} else if (storedUserData?.User !== undefined) {\n\t\t\tsetListServers(storedUserData.ListServers)\n\t\t\tsetUser(storedUserData.User)\n\t\t\tconsole.log()\n\t\t} else {\n\t\t\tnavigate('/')\n\t\t}\n\t}, [])\n\n\tconst ItemMenuCenterItem = [\n\t\t{\n\t\t\ttext: 'Home',\n\t\t\tto: '/menu',\n\t\t\tstate: { ListServers },\n\t\t},\n\t\t{\n\t\t\ttext: 'Music',\n\t\t\tto: '/menu/music',\n\t\t\tstate: { idServer: selectedId, idUser: User?.id },\n\t\t},\n\t\t{\n\t\t\ttext: 'Admin',\n\t\t\tto: '/menu/admin',\n\t\t\tstate: { idServer: selectedId, idUser: User?.id },\n\t\t},\n\t\t{\n\t\t\ttext: 'Contact',\n\t\t\tto: '/menu/contact',\n\t\t},\n\t]\n\n\tconst LogoItem = (\n\t\t<Link className='navbar-brand' to='/'>\n\t\t\t<img src={logo} className={classes.logo} alt='site logo'></img>\n\t\t\tFiner\n\t\t</Link>\n\t)\n\tconst ItemMenuLastItem = [\n\t\t{\n\t\t\ttext: 'Logout',\n\t\t\tto: '/',\n\t\t\tcallback: e => {\n\t\t\t\te.preventDefault()\n\t\t\t\tlocalStorage.removeItem('userData')\n\t\t\t\tnavigate('/')\n\t\t\t},\n\t\t},\n\t]\n\tconst PATH_TO_IMG = `https://cdn.discordapp.com/avatars/${User?.id}/${User?.avatar}.png`\n\tconst LastItemMenu = (\n\t\t<Link className='nav-link' state={User} to='/menu/me'>\n\t\t\t<img src={PATH_TO_IMG} alt='user avatar' className={classes.avatar} />\n\t\t</Link>\n\t)\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{User !== undefined && (\n\t\t\t\t<>\n\t\t\t\t\t<TopMenu\n\t\t\t\t\t\tuser={User}\n\t\t\t\t\t\tcurrentid={selectedId}\n\t\t\t\t\t\tlistServer={ListServers}\n\t\t\t\t\t\tNavigationItemCenter={ItemMenuCenterItem}\n\t\t\t\t\t\tLogoItem={LogoItem}\n\t\t\t\t\t\tRightItemMenu={ItemMenuLastItem}\n\t\t\t\t\t\tLastItemMenu={LastItemMenu}\n\t\t\t\t\t/>\n\t\t\t\t\t<Menu items={ListServers} onItemClick={handleItemClick} />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Outlet />\n\t\t</div>\n\t)\n}\n\nexport default MainPage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}