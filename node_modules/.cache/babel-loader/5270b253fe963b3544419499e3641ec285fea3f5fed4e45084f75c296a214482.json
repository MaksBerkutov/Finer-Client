{"ast":null,"code":"var _jsxFileName = \"/home/maksb/\\u0417\\u0430\\u0433\\u0440\\u0443\\u0437\\u043A\\u0438/170km/frontend/src/components/MainPage/MainPage.jsx\",\n  _s = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useLocation, Outlet } from 'react-router-dom';\nimport classes from './MainPage.module.css';\nimport TopMenu from '@component/TopMenu/TopMenu';\nimport { Nav } from 'react-bootstrap';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Menu = ({\n  items,\n  onItemClick\n}) => {\n  _s();\n  const [selectedItem, setSelectedItem] = useState(null);\n  const handleItemClick = item => {\n    setSelectedItem(item);\n    onItemClick(item);\n  };\n  return /*#__PURE__*/_jsxDEV(Nav, {\n    className: \"justify-content-center\",\n    variant: \"tabs\",\n    children: items.map(item => /*#__PURE__*/_jsxDEV(MenuItem, {\n      item: item,\n      onClick: () => handleItemClick(item),\n      isSelected: selectedItem && selectedItem.id === item.id\n    }, item.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 19,\n      columnNumber: 5\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 17,\n    columnNumber: 3\n  }, this);\n};\n_s(Menu, \"1YGeiIMlDw0BzM8kVWnRaE6POaA=\");\n_c = Menu;\nconst MenuItem = ({\n  item,\n  onClick,\n  isSelected\n}) => {\n  return /*#__PURE__*/_jsxDEV(Nav.Item, {\n    children: /*#__PURE__*/_jsxDEV(Nav.Link, {\n      onClick: onClick,\n      active: isSelected,\n      style: {\n        cursor: 'pointer',\n        backgroundColor: isSelected ? '#eee' : 'transparent'\n      },\n      children: item.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 32,\n    columnNumber: 3\n  }, this);\n};\n\n//tested\n_c2 = MenuItem;\nconst MainPage = () => {\n  _s3();\n  var _location$state,\n    _location$state2,\n    _s2 = $RefreshSig$();\n  const [selectedId, setId] = useState(-1);\n  ///\tconst ListServers = location.state?.list || []\n  //const User = location.state?.user || undefined\n  const [ListServers, setListServers] = useState(((_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.list) || []);\n  const [User, setUser] = useState(((_location$state2 = location.state) === null || _location$state2 === void 0 ? void 0 : _location$state2.user) || undefined);\n  const authenticateUser = userData => {\n    localStorage.setItem('userData', JSON.stringify(userData));\n  };\n  const getUserData = () => {\n    const storedUserData = localStorage.getItem('userData');\n    return storedUserData ? JSON.parse(storedUserData) : null;\n  };\n  const isUserAuthenticated = () => {\n    return getUserData() !== null;\n  };\n  const logoutUser = () => {\n    localStorage.removeItem('userData');\n  };\n  if (User === undefined && isUserAuthenticated()) {\n    const data = getUserData();\n    setListServers(data.ListServers);\n    setUser(data.User);\n  } else {\n    authenticateUser({\n      ListServers,\n      User\n    });\n  }\n  const navigate = useNavigate();\n  const handleItemClick = selectedItem => {\n    console.log('clicked', selectedItem.id);\n    setId(selectedItem.id);\n    console.log('clicked', selectedId);\n  };\n  _s2(useEffect(_s2(() => {\n    _s2();\n    const location = useLocation();\n    setListServers();\n    if (User === undefined) {\n      navigate('/');\n    }\n  }, \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n    return [useLocation];\n  }), [User, navigate]), \"pkHmaVRPskBaU4tMJuJJpV42k1I=\", false, function () {\n    return [useLocation];\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: classes.container,\n    children: [User !== undefined && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(TopMenu, {\n        userId: User.id,\n        currentid: selectedId,\n        listServer: ListServers\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 6\n      }, this), /*#__PURE__*/_jsxDEV(Menu, {\n        items: ListServers,\n        onItemClick: handleItemClick\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 6\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Outlet, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 3\n  }, this);\n};\n_s3(MainPage, \"gnO72JU08/kShClEY6WKQny9Jjo=\", false, function () {\n  return [useNavigate];\n});\n_c3 = MainPage;\nexport default MainPage;\nvar _c, _c2, _c3;\n$RefreshReg$(_c, \"Menu\");\n$RefreshReg$(_c2, \"MenuItem\");\n$RefreshReg$(_c3, \"MainPage\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useLocation","Outlet","classes","TopMenu","Nav","jsxDEV","_jsxDEV","Fragment","_Fragment","Menu","items","onItemClick","_s","selectedItem","setSelectedItem","handleItemClick","item","className","variant","children","map","MenuItem","onClick","isSelected","id","fileName","_jsxFileName","lineNumber","columnNumber","_c","Item","Link","active","style","cursor","backgroundColor","name","_c2","MainPage","_s3","_location$state","_location$state2","_s2","$RefreshSig$","selectedId","setId","ListServers","setListServers","location","state","list","User","setUser","user","undefined","authenticateUser","userData","localStorage","setItem","JSON","stringify","getUserData","storedUserData","getItem","parse","isUserAuthenticated","logoutUser","removeItem","data","navigate","console","log","container","userId","currentid","listServer","_c3","$RefreshReg$"],"sources":["/home/maksb/Загрузки/170km/frontend/src/components/MainPage/MainPage.jsx"],"sourcesContent":["import { useState, useEffect } from 'react'\nimport { useNavigate, useLocation, Outlet } from 'react-router-dom'\nimport classes from './MainPage.module.css'\nimport TopMenu from '@component/TopMenu/TopMenu'\n\nimport { Nav } from 'react-bootstrap'\n\nconst Menu = ({ items, onItemClick }) => {\n\tconst [selectedItem, setSelectedItem] = useState(null)\n\n\tconst handleItemClick = item => {\n\t\tsetSelectedItem(item)\n\t\tonItemClick(item)\n\t}\n\n\treturn (\n\t\t<Nav className='justify-content-center' variant='tabs'>\n\t\t\t{items.map(item => (\n\t\t\t\t<MenuItem\n\t\t\t\t\tkey={item.id}\n\t\t\t\t\titem={item}\n\t\t\t\t\tonClick={() => handleItemClick(item)}\n\t\t\t\t\tisSelected={selectedItem && selectedItem.id === item.id}\n\t\t\t\t/>\n\t\t\t))}\n\t\t</Nav>\n\t)\n}\n\nconst MenuItem = ({ item, onClick, isSelected }) => {\n\treturn (\n\t\t<Nav.Item>\n\t\t\t<Nav.Link\n\t\t\t\tonClick={onClick}\n\t\t\t\tactive={isSelected}\n\t\t\t\tstyle={{\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\tbackgroundColor: isSelected ? '#eee' : 'transparent',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{item.name}\n\t\t\t</Nav.Link>\n\t\t</Nav.Item>\n\t)\n}\n\n//tested\n\nconst MainPage = () => {\n\tconst [selectedId, setId] = useState(-1)\n\t///\tconst ListServers = location.state?.list || []\n\t//const User = location.state?.user || undefined\n\tconst [ListServers, setListServers] = useState(location.state?.list || [])\n\tconst [User, setUser] = useState(location.state?.user || undefined)\n\tconst authenticateUser = userData => {\n\t\tlocalStorage.setItem('userData', JSON.stringify(userData))\n\t}\n\tconst getUserData = () => {\n\t\tconst storedUserData = localStorage.getItem('userData')\n\t\treturn storedUserData ? JSON.parse(storedUserData) : null\n\t}\n\tconst isUserAuthenticated = () => {\n\t\treturn getUserData() !== null\n\t}\n\tconst logoutUser = () => {\n\t\tlocalStorage.removeItem('userData')\n\t}\n\n\tif (User === undefined && isUserAuthenticated()) {\n\t\tconst data = getUserData()\n\t\tsetListServers(data.ListServers)\n\t\tsetUser(data.User)\n\t} else {\n\t\tauthenticateUser({ ListServers, User })\n\t}\n\n\tconst navigate = useNavigate()\n\n\tconst handleItemClick = selectedItem => {\n\t\tconsole.log('clicked', selectedItem.id)\n\t\tsetId(selectedItem.id)\n\t\tconsole.log('clicked', selectedId)\n\t}\n\tuseEffect(() => {\n\t\t\tconst location = useLocation()\nsetListServers()\n\t\tif (User === undefined) {\n\t\t\tnavigate('/')\n\t\t}\n\t}, [User, navigate])\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t{User !== undefined && (\n\t\t\t\t<>\n\t\t\t\t\t<TopMenu\n\t\t\t\t\t\tuserId={User.id}\n\t\t\t\t\t\tcurrentid={selectedId}\n\t\t\t\t\t\tlistServer={ListServers}\n\t\t\t\t\t/>\n\t\t\t\t\t<Menu items={ListServers} onItemClick={handleItemClick} />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Outlet />\n\t\t</div>\n\t)\n}\n\nexport default MainPage\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}