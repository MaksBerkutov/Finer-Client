{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useEffect, useState } from 'react';\nexport const useUpdatePlaylist = (socket, serverId, idUser) => {\n  _s();\n  const [plalistInfo, setPlalistInfo] = useState({\n    songs: [],\n    currentPlayed: -1\n  });\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        socket.emit('connectMe', {\n          idServer: serverId,\n          idUser: idUser\n        }, callback => {\n          console.log(callback);\n        });\n        socket === null || socket === void 0 ? void 0 : socket.emit('getAllInfo', {\n          id: serverId\n        });\n        socket === null || socket === void 0 ? void 0 : socket.on('updatePlaylist', ({\n          action,\n          song\n        }) => {\n          if (song === undefined) return;\n          if (action === 'allItems') {\n            setPlalistInfo({\n              ...plalistInfo,\n              songs: song\n            });\n            console.log('set new playlist', song);\n            socket === null || socket === void 0 ? void 0 : socket.emit('getCurrentPlayed', {\n              id: serverId\n            }, callback => {\n              setPlalistInfo({\n                ...plalistInfo,\n                currentPlayed: callback\n              });\n            });\n          } else if (action === 'newCurrentPlayed') {\n            //Хуета подзаброная передлать нахуй\n            setPlalistInfo({\n              ...plalistInfo,\n              currentPlayed: song\n            });\n          } else if (action === 'add') {\n            //Хуета подзаброная передлать нахуй\n            setPlalistInfo({\n              ...plalistInfo,\n              songs: [...plalistInfo.songs, song]\n            });\n          } else if (action === 'remove') {\n            const remove = songs => {\n              const updatedSongs = [...songs];\n              if (song !== -1) {\n                updatedSongs.splice(song, 1);\n              }\n              return updatedSongs;\n            };\n            setPlalistInfo({\n              ...plalistInfo,\n              songs: remove(plalistInfo.songs)\n            });\n          }\n        });\n      } catch (error) {\n        console.log('Error fetching data:', error);\n      }\n    };\n    fetchData();\n    return () => {\n      socket === null || socket === void 0 ? void 0 : socket.off('updatePlaylist');\n    };\n  }, [plalistInfo, serverId]);\n  return plalistInfo;\n};\n_s(useUpdatePlaylist, \"OomTctdFFVP3JXedvu8fRQLY4lA=\");","map":{"version":3,"names":["useEffect","useState","useUpdatePlaylist","socket","serverId","idUser","_s","plalistInfo","setPlalistInfo","songs","currentPlayed","fetchData","emit","idServer","callback","console","log","id","on","action","song","undefined","remove","updatedSongs","splice","error","off"],"sources":["/home/maksb/Загрузки/170km/frontend/src/components/Pages/MusicPage/hooks/useUpdatePlaylist.js"],"sourcesContent":["import { useEffect, useState } from 'react'\n\nexport const useUpdatePlaylist = (socket, serverId, idUser) => {\n\tconst [plalistInfo, setPlalistInfo] = useState({\n\t\tsongs: [],\n\t\tcurrentPlayed: -1,\n\t})\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\ttry {\n\t\t\t\tsocket.emit(\n\t\t\t\t\t'connectMe',\n\t\t\t\t\t{ idServer: serverId, idUser: idUser },\n\t\t\t\t\tcallback => {\n\t\t\t\t\t\tconsole.log(callback)\n\t\t\t\t\t}\n\t\t\t\t)\n\n\t\t\t\tsocket?.emit('getAllInfo', { id: serverId })\n\t\t\t\tsocket?.on('updatePlaylist', ({ action, song }) => {\n\t\t\t\t\tif (song === undefined) return\n\t\t\t\t\tif (action === 'allItems') {\n\t\t\t\t\t\tsetPlalistInfo({\n\t\t\t\t\t\t\t...plalistInfo,\n\t\t\t\t\t\t\tsongs: song,\n\t\t\t\t\t\t})\n\t\t\t\t\t\tconsole.log('set new playlist', song)\n\n\t\t\t\t\t\tsocket?.emit('getCurrentPlayed', { id: serverId }, callback => {\n\t\t\t\t\t\t\tsetPlalistInfo({\n\t\t\t\t\t\t\t\t...plalistInfo,\n\t\t\t\t\t\t\t\tcurrentPlayed: callback,\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (action === 'newCurrentPlayed') {\n\t\t\t\t\t\t//Хуета подзаброная передлать нахуй\n\t\t\t\t\t\tsetPlalistInfo({\n\t\t\t\t\t\t\t...plalistInfo,\n\t\t\t\t\t\t\tcurrentPlayed: song,\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (action === 'add') {\n\t\t\t\t\t\t//Хуета подзаброная передлать нахуй\n\t\t\t\t\t\tsetPlalistInfo({\n\t\t\t\t\t\t\t...plalistInfo,\n\t\t\t\t\t\t\tsongs: [...plalistInfo.songs, song],\n\t\t\t\t\t\t})\n\t\t\t\t\t} else if (action === 'remove') {\n\t\t\t\t\t\tconst remove = songs => {\n\t\t\t\t\t\t\tconst updatedSongs = [...songs]\n\n\t\t\t\t\t\t\tif (song !== -1) {\n\t\t\t\t\t\t\t\tupdatedSongs.splice(song, 1)\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\treturn updatedSongs\n\t\t\t\t\t\t}\n\t\t\t\t\t\tsetPlalistInfo({\n\t\t\t\t\t\t\t...plalistInfo,\n\t\t\t\t\t\t\tsongs: remove(plalistInfo.songs),\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('Error fetching data:', error)\n\t\t\t}\n\t\t}\n\n\t\tfetchData()\n\t\treturn () => {\n\t\t\tsocket?.off('updatePlaylist')\n\t\t}\n\t}, [plalistInfo, serverId])\n\treturn plalistInfo\n}\n"],"mappings":";AAAA,SAASA,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AAE3C,OAAO,MAAMC,iBAAiB,GAAGA,CAACC,MAAM,EAAEC,QAAQ,EAAEC,MAAM,KAAK;EAAAC,EAAA;EAC9D,MAAM,CAACC,WAAW,EAAEC,cAAc,CAAC,GAAGP,QAAQ,CAAC;IAC9CQ,KAAK,EAAE,EAAE;IACTC,aAAa,EAAE,CAAC;EACjB,CAAC,CAAC;EACFV,SAAS,CAAC,MAAM;IACf,MAAMW,SAAS,GAAG,MAAAA,CAAA,KAAY;MAC7B,IAAI;QACHR,MAAM,CAACS,IAAI,CACV,WAAW,EACX;UAAEC,QAAQ,EAAET,QAAQ;UAAEC,MAAM,EAAEA;QAAO,CAAC,EACtCS,QAAQ,IAAI;UACXC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC;QACtB,CACD,CAAC;QAEDX,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,IAAI,CAAC,YAAY,EAAE;UAAEK,EAAE,EAAEb;QAAS,CAAC,CAAC;QAC5CD,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEe,EAAE,CAAC,gBAAgB,EAAE,CAAC;UAAEC,MAAM;UAAEC;QAAK,CAAC,KAAK;UAClD,IAAIA,IAAI,KAAKC,SAAS,EAAE;UACxB,IAAIF,MAAM,KAAK,UAAU,EAAE;YAC1BX,cAAc,CAAC;cACd,GAAGD,WAAW;cACdE,KAAK,EAAEW;YACR,CAAC,CAAC;YACFL,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEI,IAAI,CAAC;YAErCjB,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAES,IAAI,CAAC,kBAAkB,EAAE;cAAEK,EAAE,EAAEb;YAAS,CAAC,EAAEU,QAAQ,IAAI;cAC9DN,cAAc,CAAC;gBACd,GAAGD,WAAW;gBACdG,aAAa,EAAEI;cAChB,CAAC,CAAC;YACH,CAAC,CAAC;UACH,CAAC,MAAM,IAAIK,MAAM,KAAK,kBAAkB,EAAE;YACzC;YACAX,cAAc,CAAC;cACd,GAAGD,WAAW;cACdG,aAAa,EAAEU;YAChB,CAAC,CAAC;UACH,CAAC,MAAM,IAAID,MAAM,KAAK,KAAK,EAAE;YAC5B;YACAX,cAAc,CAAC;cACd,GAAGD,WAAW;cACdE,KAAK,EAAE,CAAC,GAAGF,WAAW,CAACE,KAAK,EAAEW,IAAI;YACnC,CAAC,CAAC;UACH,CAAC,MAAM,IAAID,MAAM,KAAK,QAAQ,EAAE;YAC/B,MAAMG,MAAM,GAAGb,KAAK,IAAI;cACvB,MAAMc,YAAY,GAAG,CAAC,GAAGd,KAAK,CAAC;cAE/B,IAAIW,IAAI,KAAK,CAAC,CAAC,EAAE;gBAChBG,YAAY,CAACC,MAAM,CAACJ,IAAI,EAAE,CAAC,CAAC;cAC7B;cAEA,OAAOG,YAAY;YACpB,CAAC;YACDf,cAAc,CAAC;cACd,GAAGD,WAAW;cACdE,KAAK,EAAEa,MAAM,CAACf,WAAW,CAACE,KAAK;YAChC,CAAC,CAAC;UACH;QACD,CAAC,CAAC;MACH,CAAC,CAAC,OAAOgB,KAAK,EAAE;QACfV,OAAO,CAACC,GAAG,CAAC,sBAAsB,EAAES,KAAK,CAAC;MAC3C;IACD,CAAC;IAEDd,SAAS,CAAC,CAAC;IACX,OAAO,MAAM;MACZR,MAAM,aAANA,MAAM,uBAANA,MAAM,CAAEuB,GAAG,CAAC,gBAAgB,CAAC;IAC9B,CAAC;EACF,CAAC,EAAE,CAACnB,WAAW,EAAEH,QAAQ,CAAC,CAAC;EAC3B,OAAOG,WAAW;AACnB,CAAC;AAAAD,EAAA,CAvEYJ,iBAAiB"},"metadata":{},"sourceType":"module","externalDependencies":[]}