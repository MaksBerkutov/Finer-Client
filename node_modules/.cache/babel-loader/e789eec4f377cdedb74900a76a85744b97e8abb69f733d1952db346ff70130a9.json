{"ast":null,"code":"import{useEffect,useState}from'react';import TreeChannel from'./components/TreeChannel/TreeChannel';import{Routes,useNavigate,useLocation}from'react-router-dom';import classes from'./Admin.module.css';import io from'socket.io-client';import{jsx as _jsx}from\"react/jsx-runtime\";const socket=io('http://localhost:3004');const Admin=()=>{const[AllChats,setAllChats]=useState(null);const location=useLocation();const idServer=location.state.idServer||undefined;const idUser=location.state.idUser||undefined;const navigate=useNavigate();useEffect(()=>{const fetchData=async()=>{try{if(idServer===-1){navigate('/error',{state:{title:'Ошибка',body:'Вы скорее не выбрали сервер по которому хотите получить информацию пожалуйста выберите интересующий вас сервер.'}});}socket===null||socket===void 0?void 0:socket.emit('connectMe',{idServer:idServer,idUser:idUser},callback=>{console.log(callback);});socket===null||socket===void 0?void 0:socket.emit('GetAllChannelFromServer',{id:idServer},results=>{console.log('RESULT',results);if(results!==null)results.categorys=new Map(JSON.parse(results.categorys));setAllChats(results);});}catch(error){console.log('Error fetching data:',error);}};fetchData();return()=>{};},[]);const SubmitItemHandler=_ref=>{let{name,type,id,item}=_ref;if(type==='text')socket.emit('sendToChat',{id:id,text:item});};return/*#__PURE__*/_jsx(\"div\",{className:classes.container,children:/*#__PURE__*/_jsx(TreeChannel,{nodeChats:AllChats,callback:SubmitItemHandler})});};export default Admin;","map":{"version":3,"names":["useEffect","useState","TreeChannel","Routes","useNavigate","useLocation","classes","io","jsx","_jsx","socket","Admin","AllChats","setAllChats","location","idServer","state","undefined","idUser","navigate","fetchData","title","body","emit","callback","console","log","id","results","categorys","Map","JSON","parse","error","SubmitItemHandler","_ref","name","type","item","text","className","container","children","nodeChats"],"sources":["/home/maksb/Загрузки/170km/frontend/src/pages/AdminPage/Admin.jsx"],"sourcesContent":["import { useEffect, useState } from 'react'\nimport TreeChannel from './components/TreeChannel/TreeChannel'\nimport { Routes, useNavigate, useLocation } from 'react-router-dom'\nimport classes from './Admin.module.css'\nimport io from 'socket.io-client'\nconst socket = io('http://localhost:3004')\nconst Admin = () => {\n\tconst [AllChats, setAllChats] = useState(null)\n\tconst location = useLocation()\n\n\tconst idServer = location.state.idServer || undefined\n\tconst idUser = location.state.idUser || undefined\n\tconst navigate = useNavigate()\n\n\tuseEffect(() => {\n\t\tconst fetchData = async () => {\n\t\t\ttry {\n\t\t\t\tif (idServer === -1) {\n\t\t\t\t\tnavigate('/error', {\n\t\t\t\t\t\tstate: {\n\t\t\t\t\t\t\ttitle: 'Ошибка',\n\t\t\t\t\t\t\tbody: 'Вы скорее не выбрали сервер по которому хотите получить информацию пожалуйста выберите интересующий вас сервер.',\n\t\t\t\t\t\t},\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tsocket?.emit(\n\t\t\t\t\t'connectMe',\n\t\t\t\t\t{ idServer: idServer, idUser: idUser },\n\t\t\t\t\tcallback => {\n\t\t\t\t\t\tconsole.log(callback)\n\t\t\t\t\t}\n\t\t\t\t)\n\t\t\t\tsocket?.emit('GetAllChannelFromServer', { id: idServer }, results => {\n\t\t\t\t\tconsole.log('RESULT', results)\n\t\t\t\t\tif (results !== null)\n\t\t\t\t\t\tresults.categorys = new Map(JSON.parse(results.categorys))\n\t\t\t\t\tsetAllChats(results)\n\t\t\t\t})\n\t\t\t} catch (error) {\n\t\t\t\tconsole.log('Error fetching data:', error)\n\t\t\t}\n\t\t}\n\n\t\tfetchData()\n\t\treturn () => {}\n\t}, [])\n\n\tconst SubmitItemHandler = ({ name, type, id, item }) => {\n\t\tif (type === 'text') socket.emit('sendToChat', { id: id, text: item })\n\t}\n\n\treturn (\n\t\t<div className={classes.container}>\n\t\t\t<TreeChannel nodeChats={AllChats} callback={SubmitItemHandler} />\n\t\t</div>\n\t)\n}\n\nexport default Admin\n"],"mappings":"AAAA,OAASA,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAC3C,MAAO,CAAAC,WAAW,KAAM,sCAAsC,CAC9D,OAASC,MAAM,CAAEC,WAAW,CAAEC,WAAW,KAAQ,kBAAkB,CACnE,MAAO,CAAAC,OAAO,KAAM,oBAAoB,CACxC,MAAO,CAAAC,EAAE,KAAM,kBAAkB,QAAAC,GAAA,IAAAC,IAAA,yBACjC,KAAM,CAAAC,MAAM,CAAGH,EAAE,CAAC,uBAAuB,CAAC,CAC1C,KAAM,CAAAI,KAAK,CAAGA,CAAA,GAAM,CACnB,KAAM,CAACC,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,IAAI,CAAC,CAC9C,KAAM,CAAAa,QAAQ,CAAGT,WAAW,CAAC,CAAC,CAE9B,KAAM,CAAAU,QAAQ,CAAGD,QAAQ,CAACE,KAAK,CAACD,QAAQ,EAAIE,SAAS,CACrD,KAAM,CAAAC,MAAM,CAAGJ,QAAQ,CAACE,KAAK,CAACE,MAAM,EAAID,SAAS,CACjD,KAAM,CAAAE,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAE9BJ,SAAS,CAAC,IAAM,CACf,KAAM,CAAAoB,SAAS,CAAG,KAAAA,CAAA,GAAY,CAC7B,GAAI,CACH,GAAIL,QAAQ,GAAK,CAAC,CAAC,CAAE,CACpBI,QAAQ,CAAC,QAAQ,CAAE,CAClBH,KAAK,CAAE,CACNK,KAAK,CAAE,QAAQ,CACfC,IAAI,CAAE,iHACP,CACD,CAAC,CAAC,CACH,CAEAZ,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEa,IAAI,CACX,WAAW,CACX,CAAER,QAAQ,CAAEA,QAAQ,CAAEG,MAAM,CAAEA,MAAO,CAAC,CACtCM,QAAQ,EAAI,CACXC,OAAO,CAACC,GAAG,CAACF,QAAQ,CAAC,CACtB,CACD,CAAC,CACDd,MAAM,SAANA,MAAM,iBAANA,MAAM,CAAEa,IAAI,CAAC,yBAAyB,CAAE,CAAEI,EAAE,CAAEZ,QAAS,CAAC,CAAEa,OAAO,EAAI,CACpEH,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAEE,OAAO,CAAC,CAC9B,GAAIA,OAAO,GAAK,IAAI,CACnBA,OAAO,CAACC,SAAS,CAAG,GAAI,CAAAC,GAAG,CAACC,IAAI,CAACC,KAAK,CAACJ,OAAO,CAACC,SAAS,CAAC,CAAC,CAC3DhB,WAAW,CAACe,OAAO,CAAC,CACrB,CAAC,CAAC,CACH,CAAE,MAAOK,KAAK,CAAE,CACfR,OAAO,CAACC,GAAG,CAAC,sBAAsB,CAAEO,KAAK,CAAC,CAC3C,CACD,CAAC,CAEDb,SAAS,CAAC,CAAC,CACX,MAAO,IAAM,CAAC,CAAC,CAChB,CAAC,CAAE,EAAE,CAAC,CAEN,KAAM,CAAAc,iBAAiB,CAAGC,IAAA,EAA8B,IAA7B,CAAEC,IAAI,CAAEC,IAAI,CAAEV,EAAE,CAAEW,IAAK,CAAC,CAAAH,IAAA,CAClD,GAAIE,IAAI,GAAK,MAAM,CAAE3B,MAAM,CAACa,IAAI,CAAC,YAAY,CAAE,CAAEI,EAAE,CAAEA,EAAE,CAAEY,IAAI,CAAED,IAAK,CAAC,CAAC,CACvE,CAAC,CAED,mBACC7B,IAAA,QAAK+B,SAAS,CAAElC,OAAO,CAACmC,SAAU,CAAAC,QAAA,cACjCjC,IAAA,CAACP,WAAW,EAACyC,SAAS,CAAE/B,QAAS,CAACY,QAAQ,CAAEU,iBAAkB,CAAE,CAAC,CAC7D,CAAC,CAER,CAAC,CAED,cAAe,CAAAvB,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}